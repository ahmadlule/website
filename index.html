<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TheBestSearchEngine</title>
  <style>
    :root {
      --bg1: #0d0f14;
      --text: #e8ecf1;
      --muted: #b7c0cc;
      --glass: rgba(255, 255, 255, 0.08);
      --glass-strong: rgba(255, 255, 255, 0.12);
      --shadow: 0 10px 30px rgba(0,0,0,0.35);
      --radius-lg: 18px;
      --radius-md: 12px;
      --radius-sm: 10px;
      --blur: 20px;
      --focus: 0 0 0 2px rgba(116,179,255,0.4), 0 8px 24px rgba(0,0,0,0.3);
      --accent: #8b5cf6;      /* standout violet for expand button */
      --bot-bubble: rgba(116,179,255,0.14);
      --user-bubble: rgba(255,255,255,0.10);
    }

    * { box-sizing: border-box; }

    html, body {
      height: 100%;
      margin: 0;
      color-scheme: dark;
      background:
        radial-gradient(1200px 800px at 10% 20%, rgba(116,179,255,0.15), transparent 60%),
        radial-gradient(1000px 700px at 80% 60%, rgba(255,100,160,0.12), transparent 60%),
        var(--bg1);
      background-repeat: no-repeat, no-repeat, no-repeat;
      background-attachment: fixed, fixed, fixed;
      background-size: cover, cover, cover;
      background-position: center center, center center, center center;
      color: var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, Apple Color Emoji, Segoe UI Emoji;
    }

    .wrap {
      min-height: 100%;
      display: grid;
      place-items: center;
      padding: 16px;
    }

    .card {
      width: min(1000px, 96vw);
      padding: clamp(16px, 3.5vw, 28px);
      background: linear-gradient(180deg, var(--glass), rgba(255,255,255,0.06));
      border: 1px solid rgba(255,255,255,0.14);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow);
      backdrop-filter: blur(var(--blur)) saturate(130%);
      -webkit-backdrop-filter: blur(var(--blur)) saturate(130%);
    }

    .brand {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: clamp(12px, 2vw, 16px);
      user-select: none;
    }
    .logo {
      width: 40px; height: 40px; border-radius: 12px;
      background: conic-gradient(from 180deg, rgba(116,179,255,0.8), rgba(255,100,160,0.65), rgba(116,179,255,0.8));
      box-shadow: inset 0 0 24px rgba(255,255,255,0.25), 0 8px 20px rgba(0,0,0,0.35);
      flex: 0 0 auto;
    }
    .title { font-size: clamp(17px, 2vw, 21px); font-weight: 700; letter-spacing: 0.2px; }
    .subtitle { margin-top: 2px; color: var(--muted); font-size: clamp(12px, 1.6vw, 14px); }

    .searchbar {
      display: flex; align-items: center; gap: 10px;
      background: var(--glass-strong);
      border: 1px solid rgba(255,255,255,0.16);
      border-radius: 14px; padding: 10px 12px;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.02);
      transition: box-shadow 0.2s ease, border-color 0.2s ease, background 0.2s ease;
    }
    .searchbar:focus-within { border-color: rgba(116,179,255,0.55); box-shadow: var(--focus); background: rgba(255,255,255,0.10); }
    .search-icon { width: 20px; height: 20px; opacity: 0.85; }
    .input {
      appearance: none; border: none; outline: none; background: transparent; color: var(--text);
      width: 100%; font-size: clamp(15px, 2.2vw, 18px); padding: 8px 2px;
    }
    .input::placeholder { color: #cfd6dfaa; }

    .section { margin-top: 16px; }
    .section-header {
      display: flex; align-items: center; gap: 8px; color: var(--muted);
      font-weight: 700; margin: 12px 2px 8px; letter-spacing: 0.2px; text-transform: uppercase; font-size: 11px;
    }
    .engines { display: grid; grid-template-columns: repeat(auto-fit, minmax(132px, 1fr)); gap: 8px; }
    .btn {
      display: inline-flex; align-items: center; justify-content: center; gap: 8px;
      padding: 10px 12px; border-radius: var(--radius-md); border: 1px solid rgba(255,255,255,0.14);
      background: linear-gradient(180deg, rgba(255,255,255,0.10), rgba(255,255,255,0.06));
      color: var(--text); text-decoration: none; font-weight: 600; font-size: 14px; letter-spacing: 0.1px;
      cursor: pointer; transition: transform 0.08s ease, filter 0.2s ease, background 0.2s ease, border-color 0.2s ease;
      user-select: none; -webkit-tap-highlight-color: transparent; min-height: 38px;
    }
    .btn:hover { transform: translateY(-1px); filter: brightness(1.05); border-color: rgba(255,255,255,0.22); }
    .btn:active { transform: translateY(0); filter: brightness(0.98); }
    .favicon { width: 16px; height: 16px; border-radius: 4px; background: rgba(255,255,255,0.25); overflow: hidden; }

    /* Expand Chatbot button - standout style and spacing */
    .expand-bar {
      margin-top: 28px; /* extra spacing above */
      display: flex; justify-content: center;
    }
    .expand-btn {
      padding: 12px 18px;
      border-radius: 14px;
      border: 1px solid color-mix(in oklab, var(--accent) 70%, white 30%);
      background: linear-gradient(180deg, color-mix(in oklab, var(--accent) 38%, transparent 62%), rgba(0,0,0,0.12));
      color: #eef1ff;
      font-weight: 800;
      letter-spacing: 0.3px;
      cursor: pointer;
      box-shadow: 0 6px 18px rgba(139, 92, 246, 0.35), inset 0 0 0 1px rgba(255,255,255,0.05);
      transition: transform 0.08s ease, filter 0.2s ease, box-shadow 0.2s ease;
      text-transform: uppercase;
    }
    .expand-btn:hover { transform: translateY(-1px); filter: brightness(1.05); }
    .expand-btn:active { transform: translateY(0); filter: brightness(0.98); }

    /* Chatbot panel */
    .chat-panel {
      margin-top: 14px;
      border: 1px solid rgba(255,255,255,0.16);
      border-radius: 14px;
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.04));
      overflow: hidden;
      display: none; /* collapsed by default */
    }
    .chat-header {
      display: flex; flex-wrap: wrap; gap: 8px; align-items: center; justify-content: space-between;
      padding: 10px 12px; border-bottom: 1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.06);
    }
    .chat-controls {
      display: flex; flex-wrap: wrap; gap: 8px; align-items: center;
    }
    .hint { color: var(--muted); font-size: 12px; opacity: 0.95; }
    .select, .chat-input, .small-btn {
      background: rgba(255,255,255,0.10);
      border: 1px solid rgba(255,255,255,0.16);
      color: var(--text);
      border-radius: 10px;
      padding: 8px 10px;
      font-size: 14px;
    }
    .small-btn { cursor: pointer; font-weight: 600; }
    .small-btn.ghost { background: rgba(255,255,255,0.08); }
    .small-btn:disabled { opacity: 0.6; cursor: not-allowed; }

    .chat-body {
      height: min(48vh, 520px);
      overflow: auto;
      padding: 12px;
      display: flex; flex-direction: column; gap: 10px;
    }
    .bubble {
      max-width: 88%;
      padding: 10px 12px;
      border-radius: 12px;
      line-height: 1.45;
      white-space: pre-wrap;
      word-wrap: break-word;
      border: 1px solid rgba(255,255,255,0.12);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.02);
    }
    .bubble.user { align-self: flex-end; background: var(--user-bubble); }
    .bubble.bot  { align-self: flex-start; background: var(--bot-bubble); }

    .chat-footer {
      display: grid;
      grid-template-columns: 1fr auto auto;
      gap: 8px;
      padding: 10px 12px;
      border-top: 1px solid rgba(255,255,255,0.10);
      background: rgba(255,255,255,0.06);
    }
    .send-btn {
      padding: 8px 12px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,0.16);
      background: linear-gradient(180deg, rgba(116,179,255,0.18), rgba(116,179,255,0.12));
      color: var(--text);
      font-weight: 700;
      cursor: pointer;
    }

    /* Mobile tweaks */
    @media (max-width: 640px) {
      .wrap { padding: 12px; }
      .card { padding: 14px; border-radius: 14px; }
      .brand { gap: 10px; margin-bottom: 10px; }
      .logo { width: 32px; height: 32px; border-radius: 10px; }
      .title { font-size: 16px; }
      .subtitle { font-size: 12px; }
      .searchbar { padding: 8px 10px; border-radius: 12px; }
      .section { margin-top: 12px; }
      .engines { grid-template-columns: repeat(auto-fit, minmax(110px, 1fr)); gap: 6px; }
      .btn { padding: 9px 10px; font-size: 13px; min-height: 34px; }
      .expand-bar { margin-top: 32px; }
      .chat-body { height: min(50vh, 420px); padding: 10px; gap: 8px; }
      .bubble { max-width: 92%; padding: 9px 10px; }
      .chat-header, .chat-footer { padding: 8px 10px; }
      .select, .chat-input, .small-btn, .send-btn { font-size: 13px; padding: 7px 9px; }
      .hint { font-size: 11px; }
    }

    @media (prefers-reduced-transparency: reduce) {
      .card, .chat-panel { backdrop-filter: none; -webkit-backdrop-filter: none; background: rgba(30, 34, 42, 0.95); }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <main class="card" role="main" aria-label="Search launcher">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <div class="title">TheBestSearchEngine</div>
          <div class="subtitle">Type once. Search anywhere.</div>
        </div>
      </div>

      <form id="searchForm" class="searchbar" autocomplete="off" onsubmit="return false;">
        <svg class="search-icon" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M21 21l-3.9-3.9M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15z"
                stroke="currentColor" opacity="0.85" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
        <input id="query" class="input" type="text" placeholder="Search the web..." aria-label="Search query" />
      </form>

      <div id="sections"></div>

      <div class="expand-bar">
        <button id="expandChatBtn" class="expand-btn" type="button">Expand Chatbot</button>
      </div>

      <section id="chatPanel" class="chat-panel" aria-label="Chatbot panel">
        <div class="chat-header">
          <div class="chat-controls">
            <select id="modelSelect" class="select" aria-label="Model">
              <option value="openai/gpt-oss-20b:free">openai/gpt-oss-20b:free</option>
              <option value="qwen/qwen3-coder:free">qwen/qwen3-coder:free</option>
              <option value="google/gemini-2.5-pro-exp-03-25">google/gemini-2.5-pro-exp-03-25</option>
              <option value="google/gemini-2.0-flash-exp:free">google/gemini-2.0-flash-exp:free</option>
              <option value="tngtech/deepseek-r1t2-chimera:free">tngtech/deepseek-r1t2-chimera:free</option>
              <option value="moonshotai/kimi-dev-72b:free">moonshotai/kimi-dev-72b:free</option>
              <option value="z-ai/glm-4.5-air:free">z-ai/glm-4.5-air:free</option>
            </select>
            <button id="insertQueryBtn" class="small-btn ghost" type="button" title="Insert main query">Insert</button>
            <span class="hint">Inserts text from the main search box</span>
          </div>
        </div>

        <div id="chatBody" class="chat-body" role="log" aria-live="polite" aria-relevant="additions"></div>

        <div class="chat-footer">
          <input id="chatInput" class="chat-input" type="text" placeholder="Type your message..." aria-label="Chat message" />
          <button id="sendBtn" class="send-btn" type="button">Send</button>
          <button id="clearBtn" class="small-btn" type="button">Clear</button>
        </div>
      </section>
    </main>
  </div>

  <!-- External JS -->
  <script src="app.js"></script>
</body>
</html>
